{% macro attrs(round, i) -%}
{% set data = bracket[round][i] %}
{% if data -%}
class="{% if 'class' in kwargs %}{{ kwargs['class'] }} {% endif %}team-{{ data['team'] }}{% if data['correct'] == True %} correct{% elif data['correct'] == False %} incorrect{% endif %}{% if data['won'] == True %} won{% endif %}"
data-team="{{ data['team'] }}"
data-teamname="{{ data['teamname'] }}"
{%- endif %}
{%- endmacro %}
{% macro team(round, i) -%}
{% set data = bracket[round][i] %}
{% if round != 7 %}<li {{ attrs(round, i) }}>{% endif %}
{% if round == 0 %}<span class="seed">{{ data['seed'] }}</span>{% endif %}
{% if round == 1 %}<span class="seed">{{ seedorder[i%16] }}</span>{% endif %}
{% if data -%}
<span class="team">{% if round in (2, 3, 4, 5) %}{{ data['team'] }}{% else %}{{ data['teamname'] }}{% endif %}</span>
{%- endif %}
{% if round in (0, 1) %}</span>{% endif %}
{% if round != 7 %}</li>{% endif %}
{%- endmacro %}
    <div class="firstfour">
      {% for i in range(4) %}
      <ul class="match">
        {{ team(0, 2*i) }}
        {{ team(0, 2*i+1) }}
      </ul>
      {% endfor %}
    </div>
    <div class="bracket">
      {% for half in range(2) %}
      <div class="half{{ half + 1 }}">
        {% for round in range(1, 6) %}
        <div class="round{{ round }}">
          {% for i in range(2**(5-round)) %}
          <ul class="match">
            {{ team(round, half*2**(6-round) + 2*i) }}
            {{ team(round, half*2**(6-round) + 2*i + 1) }}
          </ul>
          {% endfor %}
        </div>
        {% endfor %}
      </div>
      {% endfor %}
      <div class="finalfour">
        <ul class="match">
          {{ team(6, 0) }}
          {{ team(6, 1) }}
        </ul>
      </div>
      <div {{ attrs(7, 0, class="champion") }}>{{ team(7, 0) }}</div>
    </div>
{# vim: set ts=2 sw=2 sta et syntax=jinja: #}
